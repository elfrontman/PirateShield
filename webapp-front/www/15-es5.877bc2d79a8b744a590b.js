(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"5zjZ":function(l,n,e){"use strict";e.r(n);var u=e("CcnG"),t=e("0iYF"),o=function(){function l(l,n){this.socket=l,this.service=n,this.message="",this.messages=[],this.tokenUser=""}return l.prototype.ngAfterViewChecked=function(){},l.prototype.ngOnInit=function(){var l=this;this.socket.connect(),this.socket.fromEvent("chat-token").subscribe(function(n){l.service.setTokentChat(n.token).subscribe(function(e){e.created?localStorage.setItem("token_chat",n.token):e.token&&localStorage.setItem("token_chat",e.token),l.tokenUser=localStorage.getItem("token_chat"),l.socket.emit("create",l.tokenUser),l.service.getChat(l.tokenUser).subscribe(function(n){console.log(n),l.messages=n,l.scrollBottom()})})}),this.socket.fromEvent("received").subscribe(function(n){l.messages.push(n),l.scrollBottom()})},l.prototype.sendMessage=function(){var l={message:this.message,token:this.tokenUser,type:"String"};this.socket.emit("send-message",l),this.messages.push(l),this.message="",this.scrollBottom()},l.prototype.sendImageMessage=function(l){var n=this,e=new FileReader;e.onload=function(l){var e={token:n.tokenUser,message:l.target.result,type:"Image"};console.log(e),n.socket.emit("send-file",e),n.messages.push(e)},console.log(l.files[0]),e.readAsDataURL(l.files[0]),this.scrollBottom()},l.prototype.ionViewWillLeave=function(){this.socket.disconnect()},l.prototype.scrollBottom=function(){var l=this;try{setTimeout(function(n){l.chatview.el.scrollToBottom(0)})}catch(n){console.log(n)}},l}(),s=function(){return function(){}}(),i=e("pMnS"),c=e("oBZk"),a=e("ZZ/e"),r=e("Ip0R"),b=e("ZYCi"),g=e("gIcY"),h=e("92vz"),m=u.rb({encapsulation:0,styles:[[".message[_ngcontent-%COMP%]{padding:10px;border-radius:10px;margin-bottom:4px;white-space:pre-wrap}.my-message[_ngcontent-%COMP%]{background:#3880ff;color:#fff}.other-message[_ngcontent-%COMP%]{background:#e3e3e3;color:#333}.time[_ngcontent-%COMP%]{color:#dfdfdf;float:right;font-size:small}.other-message[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#333}.message-input[_ngcontent-%COMP%]{margin-top:0;background:#fff;min-height:40px}.msg-btn[_ngcontent-%COMP%]{--padding-start:0.5em;--padding-end:0.5em}.icon-svg[_ngcontent-%COMP%]{width:30px;height:30px}"]],data:{}});function p(l){return u.Pb(0,[(l()(),u.tb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Nb(1,null,["",""]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.message)})}function k(l){return u.Pb(0,[(l()(),u.tb(0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,0,0,n.parent.context.$implicit.message)})}function d(l){return u.Pb(0,[(l()(),u.tb(0,0,null,null,14,"ion-row",[],null,null,null,c.O,c.o)),u.sb(1,49152,null,0,a.gb,[u.h,u.k,u.z],null,null),(l()(),u.tb(2,0,null,0,12,"ion-col",[["class","message"],["size","9"]],[[1,"offset",0]],null,null,c.E,c.e)),u.Kb(512,null,r.u,r.v,[u.s,u.t,u.k,u.D]),u.sb(4,278528,null,0,r.i,[r.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.sb(5,49152,null,0,a.r,[u.h,u.k,u.z],{size:[0,"size"]},null),(l()(),u.tb(6,0,null,0,5,"div",[],null,null,null,null,null)),u.sb(7,16384,null,0,r.o,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),u.ib(16777216,null,null,1,null,p)),u.sb(9,278528,null,0,r.p,[u.O,u.L,r.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u.ib(16777216,null,null,1,null,k)),u.sb(11,278528,null,0,r.p,[u.O,u.L,r.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u.tb(12,0,null,0,2,"div",[["class","time"],["text-right",""]],null,null,null,null,null)),(l()(),u.Nb(13,null,["",""])),u.Jb(14,2)],function(l,n){l(n,4,0,"message",n.context.$implicit.isAdmin?"other-message":"my-message"),l(n,5,0,"9"),l(n,7,0,n.context.$implicit.type),l(n,9,0,"String"),l(n,11,0,"Image")},function(l,n){l(n,2,0,n.context.$implicit.isAdmin?"":3);var e=u.Ob(n,13,0,l(n,14,0,u.Fb(n.parent,0),n.context.$implicit.createdAt,"short"));l(n,13,0,e)})}function f(l){return u.Pb(0,[u.Hb(0,r.d,[u.u]),u.Lb(671088640,1,{chatview:0}),(l()(),u.tb(2,0,null,null,23,"ion-header",[],null,null,null,c.I,c.i)),u.sb(3,49152,null,0,a.z,[u.h,u.k,u.z],null,null),(l()(),u.tb(4,0,null,0,21,"ion-toolbar",[["color","primary"]],null,null,null,c.Z,c.z)),u.sb(5,49152,null,0,a.zb,[u.h,u.k,u.z],{color:[0,"color"]},null),(l()(),u.tb(6,0,null,0,19,"ion-grid",[],null,null,null,c.H,c.h)),u.sb(7,49152,null,0,a.y,[u.h,u.k,u.z],null,null),(l()(),u.tb(8,0,null,0,17,"ion-row",[["align-items-center",""]],null,null,null,c.O,c.o)),u.sb(9,49152,null,0,a.gb,[u.h,u.k,u.z],null,null),(l()(),u.tb(10,0,null,0,8,"ion-col",[["size","2"]],null,null,null,c.E,c.e)),u.sb(11,49152,null,0,a.r,[u.h,u.k,u.z],{size:[0,"size"]},null),(l()(),u.tb(12,0,null,0,6,"ion-buttons",[["routerLink","/brands"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Fb(l,14).onClick()&&t),"click"===n&&(t=!1!==u.Fb(l,15).onClick(e)&&t),t},c.C,c.c)),u.sb(13,49152,null,0,a.j,[u.h,u.k,u.z],null,null),u.sb(14,16384,null,0,b.n,[b.m,b.a,[8,null],u.D,u.k],{routerLink:[0,"routerLink"]},null),u.sb(15,737280,null,0,a.Hb,[r.h,a.Eb,u.k,b.m,[2,b.n]],null,null),(l()(),u.tb(16,0,null,0,2,"ion-button",[],null,null,null,c.B,c.b)),u.sb(17,49152,null,0,a.i,[u.h,u.k,u.z],null,null),(l()(),u.tb(18,0,null,0,0,"img",[["class","icon-svg"],["src","./assets/images/back.svg"]],null,null,null,null,null)),(l()(),u.tb(19,0,null,0,4,"ion-col",[["size","8"]],null,null,null,c.E,c.e)),u.sb(20,49152,null,0,a.r,[u.h,u.k,u.z],{size:[0,"size"]},null),(l()(),u.tb(21,0,null,0,2,"ion-title",[],null,null,null,c.Y,c.y)),u.sb(22,49152,null,0,a.xb,[u.h,u.k,u.z],null,null),(l()(),u.Nb(-1,0,["CHAT"])),(l()(),u.tb(24,0,null,0,1,"ion-col",[["size","2"]],null,null,null,c.E,c.e)),u.sb(25,49152,null,0,a.r,[u.h,u.k,u.z],{size:[0,"size"]},null),(l()(),u.tb(26,0,null,null,5,"ion-content",[],null,null,null,c.F,c.f)),u.sb(27,49152,[[1,4],["chatview",4]],0,a.s,[u.h,u.k,u.z],null,null),(l()(),u.tb(28,0,null,0,3,"ion-grid",[],null,null,null,c.H,c.h)),u.sb(29,49152,null,0,a.y,[u.h,u.k,u.z],null,null),(l()(),u.ib(16777216,null,0,1,null,d)),u.sb(31,278528,null,0,r.j,[u.O,u.L,u.s],{ngForOf:[0,"ngForOf"]},null),(l()(),u.tb(32,0,null,null,27,"ion-footer",[],null,null,null,c.G,c.g)),u.sb(33,49152,null,0,a.x,[u.h,u.k,u.z],null,null),(l()(),u.tb(34,0,null,0,25,"ion-toolbar",[["color","light"]],null,null,null,c.Z,c.z)),u.sb(35,49152,null,0,a.zb,[u.h,u.k,u.z],{color:[0,"color"]},null),(l()(),u.tb(36,0,null,0,23,"ion-row",[["align-items-center",""]],null,null,null,c.O,c.o)),u.sb(37,49152,null,0,a.gb,[u.h,u.k,u.z],null,null),(l()(),u.tb(38,0,null,0,8,"ion-col",[["size","8"]],null,null,null,c.E,c.e)),u.sb(39,49152,null,0,a.r,[u.h,u.k,u.z],{size:[0,"size"]},null),(l()(),u.tb(40,0,null,0,6,"ion-textarea",[["auto-grow",""],["class","message-input"],["rows","1"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var t=!0,o=l.component;return"ionBlur"===n&&(t=!1!==u.Fb(l,41)._handleBlurEvent()&&t),"ionChange"===n&&(t=!1!==u.Fb(l,41)._handleInputEvent(e.target.value)&&t),"ngModelChange"===n&&(t=!1!==(o.message=e)&&t),t},c.W,c.w)),u.sb(41,16384,null,0,a.Jb,[u.k],null,null),u.Kb(1024,null,g.b,function(l){return[l]},[a.Jb]),u.sb(43,671744,null,0,g.e,[[8,null],[8,null],[8,null],[6,g.b]],{model:[0,"model"]},{update:"ngModelChange"}),u.Kb(2048,null,g.c,null,[g.e]),u.sb(45,16384,null,0,g.d,[[4,g.c]],null,null),u.sb(46,49152,null,0,a.vb,[u.h,u.k,u.z],{rows:[0,"rows"]},null),(l()(),u.tb(47,0,null,0,6,"ion-col",[["size","2"]],null,null,null,c.E,c.e)),u.sb(48,49152,null,0,a.r,[u.h,u.k,u.z],{size:[0,"size"]},null),(l()(),u.tb(49,0,null,0,4,"ion-button",[["class","msg-btn"],["color","primary"],["expand","block"],["fill","clear"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Fb(l,53).click()&&t),t},c.B,c.b)),u.sb(50,49152,null,0,a.i,[u.h,u.k,u.z],{color:[0,"color"],expand:[1,"expand"],fill:[2,"fill"]},null),(l()(),u.tb(51,0,null,0,1,"ion-icon",[["name","ios-camera"],["slot","icon-only"]],null,null,null,c.J,c.j)),u.sb(52,49152,null,0,a.A,[u.h,u.k,u.z],{name:[0,"name"]},null),(l()(),u.tb(53,0,[["filechooser",1]],0,0,"input",[["capture","camera"],["hidden",""],["type","file"]],null,[[null,"change"]],function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.sendImageMessage(u.Fb(l,53))&&t),t},null,null)),(l()(),u.tb(54,0,null,0,5,"ion-col",[["size","2"]],null,null,null,c.E,c.e)),u.sb(55,49152,null,0,a.r,[u.h,u.k,u.z],{size:[0,"size"]},null),(l()(),u.tb(56,0,null,0,3,"ion-button",[["class","msg-btn"],["color","primary"],["expand","block"],["fill","clear"]],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.sendMessage()&&u),u},c.B,c.b)),u.sb(57,49152,null,0,a.i,[u.h,u.k,u.z],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"],fill:[3,"fill"]},null),(l()(),u.tb(58,0,null,0,1,"ion-icon",[["name","ios-send"],["slot","icon-only"]],null,null,null,c.J,c.j)),u.sb(59,49152,null,0,a.A,[u.h,u.k,u.z],{name:[0,"name"]},null)],function(l,n){var e=n.component;l(n,5,0,"primary"),l(n,11,0,"2"),l(n,14,0,"/brands"),l(n,15,0),l(n,20,0,"8"),l(n,25,0,"2"),l(n,31,0,e.messages),l(n,35,0,"light"),l(n,39,0,"8"),l(n,43,0,e.message),l(n,46,0,"1"),l(n,48,0,"2"),l(n,50,0,"primary","block","clear"),l(n,52,0,"ios-camera"),l(n,55,0,"2"),l(n,57,0,"primary",""===e.message,"block","clear"),l(n,59,0,"ios-send")},function(l,n){l(n,40,0,u.Fb(n,45).ngClassUntouched,u.Fb(n,45).ngClassTouched,u.Fb(n,45).ngClassPristine,u.Fb(n,45).ngClassDirty,u.Fb(n,45).ngClassValid,u.Fb(n,45).ngClassInvalid,u.Fb(n,45).ngClassPending)})}function z(l){return u.Pb(0,[(l()(),u.tb(0,0,null,null,1,"app-chat",[],null,null,null,f,m)),u.sb(1,8503296,null,0,o,[h.a,t.a],null,null)],function(l,n){l(n,1,0)},null)}var v=u.pb("app-chat",o,z,{},{},[]);e.d(n,"ChatPageModuleNgFactory",function(){return C});var C=u.qb(s,[],function(l){return u.Cb([u.Db(512,u.j,u.bb,[[8,[i.a,v]],[3,u.j],u.x]),u.Db(4608,r.m,r.l,[u.u,[2,r.z]]),u.Db(4608,g.g,g.g,[]),u.Db(4608,a.a,a.a,[u.z,u.g]),u.Db(4608,a.Db,a.Db,[a.a,u.j,u.q]),u.Db(4608,a.Gb,a.Gb,[a.a,u.j,u.q]),u.Db(1073742336,r.b,r.b,[]),u.Db(1073742336,g.f,g.f,[]),u.Db(1073742336,g.a,g.a,[]),u.Db(1073742336,a.Bb,a.Bb,[]),u.Db(1073742336,b.o,b.o,[[2,b.t],[2,b.m]]),u.Db(1073742336,s,s,[]),u.Db(1024,b.k,function(){return[[{path:"",component:o}]]},[])])})}}]);